{"ast":null,"code":"import _defineProperty from \"/home/renandev/Documentos/alarsys/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/renandev/Documentos/alarsys/frontend/src/components/user/EquipmentCrud.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Main from '../template/Main';\nconst baseUrl = 'http://localhost:3000/Equipamentos'; // Estado inicial de cadastro de equipamento\n\nconst initialState = {\n  Equipamentos: {\n    id: '',\n    nomeEquipamento: '',\n    numeroSerie: '',\n    tipo: '',\n    dataCadastro: ''\n  },\n  list: []\n};\nexport default class EquipmentCrud extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = _objectSpread({}, initialState);\n  }\n\n  componentWillMount() {\n    axios(baseUrl).then(resp => {\n      this.setState({\n        list: resp.data\n      });\n    });\n  }\n\n  clear() {\n    this.setState({\n      Equipamentos: initialState.Equipamentos\n    });\n  }\n\n  save() {\n    const equipment = this.state.equipment;\n    const method = equipment.id ? 'put' : 'post';\n    const url = equipment.id ? \"\".concat(baseUrl, \"/\").concat(equipment.id) : baseUrl;\n    axios[method](url, equipment).then(resp => {\n      const list = this.getUpdateList(resp.data);\n      this.setState({\n        alarm: initialState.equipment,\n        list\n      });\n    });\n  }\n\n  getUpdateList(equipment, add = true) {\n    const list = this.state.list.filter(newid => newid.id !== equipment.id);\n    if (add) list.unshift(equipment);\n    return list;\n  }\n\n  updateField(event) {\n    const equipment = _objectSpread({}, this.state.equipment);\n\n    equipment[event.target.name] = event.target.value;\n    this.setState({\n      equipment\n    });\n  }\n\n  renderForm() {\n    return React.createElement(\"div\", {\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12 col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"Nome\")), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"nomeEquipamento\",\n      value: this.equipment,\n      onChange: e => this.updateField(e),\n      placeholder: \"Digite o nome do equipamento\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-12 col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"N\\xBA de S\\xE9rie\")), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"numeroSerie\",\n      value: this.equipment,\n      onChange: e => this.updateField(e),\n      placeholder: \"Digite o n\\xFAmero de s\\xE9rie do equipamento\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-12 col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Tipo\")), React.createElement(\"select\", {\n      className: \"form-control\",\n      name: \"tipo\",\n      value: this.alarm,\n      onChange: e => this.updateField(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"Tens\\xE3o\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Tens\\xE3o\"), React.createElement(\"option\", {\n      value: \"Corrente\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Corrente\"), React.createElement(\"option\", {\n      value: \"\\xD3leo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"\\xD3leo\")))), React.createElement(\"div\", {\n      className: \"col-12 col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Data de Cadastro\")), React.createElement(\"input\", {\n      type: \"date\",\n      className: \"form-control\",\n      name: \"dataCadastro\",\n      value: this.equipment,\n      onChange: e => this.updateField(e),\n      placeholder: \"Digite a data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row col-12 col-md-12 d-flex justify-content-lg-end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"col-md-2 btn btn-success ml-2\",\n      onClick: e => this.save(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Salvar\"))));\n  }\n\n  load(equipment) {\n    this.setState({\n      equipment\n    });\n  }\n\n  remove(alarm) {\n    axios.delete(\"\".concat(baseUrl, \"/\").concat(alarm.id)).then(resp => {\n      const list = this.getUpdateList(alarm, false);\n      this.setState({\n        list\n      });\n    });\n  }\n\n  renderTable() {\n    return React.createElement(\"table\", {\n      className: \"table mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Nome\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"N\\xBA de S\\xE9rie\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"Tipo\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Data de Cadastro\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"A\\xE7\\xF5es\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, this.renderRows()));\n  }\n\n  renderRows() {\n    return this.state.list.map(equipment => {\n      return React.createElement(\"tr\", {\n        key: equipment.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, equipment.id), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, equipment.nomeEquipamento), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, equipment.numeroSerie), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, equipment.tipo), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, equipment.dataCadastro), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-warning\",\n        onClick: () => this.load(equipment),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-pencil\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"btn btn-danger ml-2\",\n        onClick: () => this.remove(equipment),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-trash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }))));\n    });\n  }\n\n  render() {\n    return React.createElement(Main, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, this.renderForm(), this.renderTable());\n  }\n\n}\n;","map":{"version":3,"sources":["/home/renandev/Documentos/alarsys/frontend/src/components/user/EquipmentCrud.jsx"],"names":["React","Component","axios","Main","baseUrl","initialState","Equipamentos","id","nomeEquipamento","numeroSerie","tipo","dataCadastro","list","EquipmentCrud","state","componentWillMount","then","resp","setState","data","clear","save","equipment","method","url","getUpdateList","alarm","add","filter","newid","unshift","updateField","event","target","name","value","renderForm","e","load","remove","delete","renderTable","renderRows","map","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport Main from '../template/Main'\n\nconst baseUrl = 'http://localhost:3000/Equipamentos';\n// Estado inicial de cadastro de equipamento\nconst initialState = {\n    Equipamentos: { id: '' , nomeEquipamento: '' , numeroSerie: '' , tipo: '' , dataCadastro: '' },\n    list: []\n};\n\nexport default class EquipmentCrud extends Component {\n\n    state = {...initialState};\n\n    componentWillMount(){\n        axios(baseUrl).then(resp => {\n            this.setState({ list: resp.data})\n        })\n    };\n\n    clear() {\n        this.setState({ Equipamentos: initialState.Equipamentos })\n    };\n\n    save() {\n        const equipment = this.state.equipment;\n        const method = equipment.id ? 'put' : 'post';\n        const url = equipment.id ? `${baseUrl}/${equipment.id}` : baseUrl;\n        axios[method](url,equipment)\n            .then(resp => {\n                const list = this.getUpdateList(resp.data);\n                this.setState({ alarm: initialState.equipment, list})\n            })\n    };\n\n    getUpdateList(equipment, add = true) {\n        const list = this.state.list.filter(newid => newid.id !== equipment.id);\n        if(add) list.unshift(equipment)\n        return list\n    };\n\n    updateField(event) {\n        const equipment = {...this.state.equipment }\n        equipment[event.target.name] = event.target.value\n        this.setState ({ equipment })\n    };\n\n    renderForm() {\n        return (\n            <div className=\"form\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-md-6\">\n                        <div className=\"form-group\">\n                            <label><strong>Nome</strong></label>\n                            <input type=\"text\" className=\"form-control\"\n                                   name=\"nomeEquipamento\"\n                                   value={this.equipment}\n                                   onChange={e => this.updateField(e)}\n                                   placeholder=\"Digite o nome do equipamento\" />\n                        </div>\n                    </div>\n\n                    <div className=\"col-12 col-md-6\">\n                        <div className=\"form-group\">\n                            <label><strong>Nº de Série</strong></label>\n                            <input type=\"text\" className=\"form-control\"\n                                   name=\"numeroSerie\"\n                                   value={this.equipment}\n                                   onChange={e => this.updateField(e)}\n                                   placeholder=\"Digite o número de série do equipamento\" />\n                        </div>\n                    </div>\n\n                    <div className=\"col-12 col-md-6\">\n                        <div className=\"form-group\">\n                            <label><strong>Tipo</strong></label>\n                                <select className=\"form-control\"\n                                        name=\"tipo\"\n                                        value={this.alarm}\n                                        onChange={e => this.updateField(e)}>\n                                    <option value=\"Tensão\">Tensão</option>\n                                    <option value=\"Corrente\">Corrente</option>\n                                    <option value=\"Óleo\">Óleo</option>\n                                </select>\n                        </div>\n                    </div>\n                    <div className=\"col-12 col-md-6\">\n                        <div className=\"form-group\">\n                            <label><strong>Data de Cadastro</strong></label>\n                            <input type=\"date\" className=\"form-control\"\n                                   name=\"dataCadastro\"\n                                   value={this.equipment}\n                                   onChange={e => this.updateField(e)}\n                                   placeholder=\"Digite a data\"/>\n                        </div>\n                    </div>\n\n                    <div className=\"row col-12 col-md-12 d-flex justify-content-lg-end\">\n                        <button className=\"col-md-2 btn btn-success ml-2\"\n                                onClick={e => this.save(e)}>\n                            Salvar\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n        )\n\n    }\n\n    load(equipment) {\n        this.setState({ equipment })\n    };\n\n    remove(alarm) {\n        axios.delete(`${baseUrl}/${alarm.id}`).then(resp => {\n            const list = this.getUpdateList(alarm, false)\n            this.setState({ list })\n        })\n    };\n\n    renderTable() {\n        return(\n            <table className=\"table mt-4\">\n                <thead>\n                <tr>\n                    <th>ID</th>\n                    <th>Nome</th>\n                    <th>Nº de Série</th>\n                    <th>Tipo</th>\n                    <th>Data de Cadastro</th>\n                    <th>Ações</th>\n                </tr>\n                </thead>\n                <tbody>\n                {this.renderRows()}\n                </tbody>\n            </table>\n        )\n    };\n\n    renderRows() {\n        return this.state.list.map(equipment =>{\n            return(\n                <tr key={equipment.id}>\n                    <td>{equipment.id}</td>\n                    <td>{equipment.nomeEquipamento}</td>\n                    <td>{equipment.numeroSerie}</td>\n                    <td>{equipment.tipo}</td>\n                    <td>{equipment.dataCadastro}</td>\n                    <td>\n                        <button className=\"btn btn-warning\"\n                                onClick={() => this.load(equipment)}>\n                            <i className=\"fa fa-pencil\"></i>\n                        </button>\n                        <button className=\"btn btn-danger ml-2\"\n                                onClick={() => this.remove(equipment)}>\n                            <i className=\"fa fa-trash\"></i>\n                        </button>\n                    </td>\n                </tr>\n            )\n        })\n    };\n    render () {\n        return (\n            <Main>\n                {this.renderForm()}\n                {this.renderTable()}\n            </Main>\n        )\n    }\n};"]},"metadata":{},"sourceType":"module"}